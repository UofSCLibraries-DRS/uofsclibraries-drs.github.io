
<!DOCTYPE html>


<html lang="en" data-content_root="../../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Exploring Metadata and Pre-Processing &#8212; USC Libraries - DRS Resources for Data Literacy</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'src/PythonForDataAnalysis/GettingStarted/pandas/exploring-metadata';</script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../../../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../../_static/USC_Libraries_logo_horizontal_RGB_2C.png" class="logo__image only-light" alt="USC Libraries - DRS Resources for Data Literacy - Home"/>
    <script>document.write(`<img src="../../../../_static/USC_Libraries_logo_horizontal_RGB_2C.png" class="logo__image only-dark" alt="USC Libraries - DRS Resources for Data Literacy - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../../intro.html">
                    Introduction
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Python for Data Analysis</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../GettingStarted.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../GettingData/GettingData.html">Getting Data (APIs, Web Scraping)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../DataCleaningBasics/DataCleaning_Basics.html">Data Cleaning Basics</a></li>


<li class="toctree-l1"><a class="reference internal" href="../../DataVisualization/DataVisualization.html">Data Visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ProjectExamples/Quantitative_Analysis.html">Project Example</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Python for Text Analysis</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../PythonForTextAnalysis/GettingStarted/GettingStarted.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../PythonForTextAnalysis/Advanced/AdvancedTextAnalysis.html">Advanced Text Analysis</a></li>

<li class="toctree-l1"><a class="reference internal" href="../../../PythonForTextAnalysis/ProjectExamples/TextPreprocessingMethods.html">Project Example</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">R for Data Analysis</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../RForDataAnalysis/Data_Wrangling.html">Getting Started</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">R for Text Analysis</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../RForTextAnalysis/GettingStarted/GettingStarted.html">Getting Started</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Machine Learning</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../MachineLearning/PythonCode/Python.html">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../MachineLearning/RCode/R.html">R</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">App Development</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../AppDevelopment/AppDevelopment.html">Getting Started</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/UofSCLibraries-DRS/uofsclibraries-drs.github.io" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/UofSCLibraries-DRS/uofsclibraries-drs.github.io/issues/new?title=Issue%20on%20page%20%2Fsrc/PythonForDataAnalysis/GettingStarted/pandas/exploring-metadata.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../../_sources/src/PythonForDataAnalysis/GettingStarted/pandas/exploring-metadata.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Exploring Metadata and Pre-Processing</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#import-your-dataset">Import your dataset</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#filtering-out-columns-using-pandas">Filtering out columns using Pandas</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#filtering-out-rows-with-pandas">Filtering out rows with Pandas</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#remove-all-rows-without-data-for-a-particular-column">Remove all rows without data for a particular column</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#remove-row-based-on-the-content-of-a-particular-column">Remove row based on the content of a particular column</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#filtering-the-full-json-l-dataset">Filtering the Full JSON-L Dataset</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizing-the-pre-processed-data">Visualizing the Pre-Processed Data</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <p><img src="https://ithaka-labs.s3.amazonaws.com/static-files/images/tdm/tdmdocs/CC_BY.png" align=left alt="CC BY license logo" /><br /><br />
Created by <a class="reference external" href="http://nkelber.com">Nathan Kelber</a> and Ted Lawless for <a class="reference external" href="https://labs.jstor.org/">JSTOR Labs</a> under <a class="reference external" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons CC BY License</a><br /></p>
<hr class="docutils" />
<section class="tex2jax_ignore mathjax_ignore" id="exploring-metadata-and-pre-processing">
<h1>Exploring Metadata and Pre-Processing<a class="headerlink" href="#exploring-metadata-and-pre-processing" title="Link to this heading">#</a></h1>
<p><strong>Description of methods in this notebook:</strong>
This <a class="reference external" href="https://jupyter-notebook.readthedocs.io/en/stable/">notebook</a> shows how to explore and pre-process the <a class="reference external" href="https://csrc.nist.gov/glossary/term/metadata">metadata</a> of a <a class="reference external" href="https://www.ibm.com/think/topics/dataset">dataset</a> using <a class="reference external" href="https://pandas.pydata.org/docs/">Pandas</a>.</p>
<p>The following processes are described:</p>
<ul class="simple">
<li><p>Importing a <a class="reference external" href="https://docs.python.org/3/library/csv.html">CSV file</a> containing the <a class="reference external" href="https://csrc.nist.gov/glossary/term/metadata">metadata</a> for a given dataset ID</p></li>
<li><p>Creating a <a class="reference external" href="https://pandas.pydata.org/docs/">Pandas</a> dataframe to view the <a class="reference external" href="https://csrc.nist.gov/glossary/term/metadata">metadata</a></p></li>
<li><p>Pre-processing your <a class="reference external" href="https://www.ibm.com/think/topics/dataset">dataset</a> by filtering out unwanted texts</p></li>
<li><p>Importing the full <a class="reference external" href="https://jsonlines.org">JSON Lines (.jsonl)</a> dataset and filtering it</p></li>
<li><p>Visualizing the metadata of your pre-processed <a class="reference external" href="https://www.ibm.com/think/topics/dataset">dataset</a> by the number of documents/year and pages/year</p></li>
</ul>
<p><strong>Knowledge Required:</strong></p>
<ul class="simple">
<li><p>Python Basics Series (<a class="reference internal" href="../basic/python-basics-1.html"><span class="std std-doc">Start Python Basics 1</span></a>)</p></li>
</ul>
<p><strong>Knowledge Recommended:</strong></p>
<ul class="simple">
<li><p>Pandas Series (<a class="reference internal" href="pandas-1.html"><span class="std std-doc">Start Pandas 1</span></a>)</p></li>
</ul>
<hr class="docutils" />
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### Import modules and libraries ###</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">constellate</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">gzip</span>

<span class="c1"># For displaying plots inline with Jupyter Notebooks</span>
<span class="o">%</span><span class="k">matplotlib</span> inline
</pre></div>
</div>
</div>
</div>
<section id="import-your-dataset">
<h2>Import your dataset<a class="headerlink" href="#import-your-dataset" title="Link to this heading">#</a></h2>
<p>We’ll use the <code class="docutils literal notranslate"><span class="pre">constellate</span></code> client to automatically retrieve the <a class="reference external" href="https://csrc.nist.gov/glossary/term/metadata">metadata</a> for a <a class="reference external" href="https://www.ibm.com/think/topics/dataset">dataset</a>. We can retrieve <a class="reference external" href="https://csrc.nist.gov/glossary/term/metadata">metadata</a> in a <a class="reference external" href="https://docs.python.org/3/library/csv.html">CSV file</a> using the <code class="docutils literal notranslate"><span class="pre">get_metadata</span></code> method.</p>
<p>Enter a <a class="reference external" href="https://www.ibm.com/think/topics/dataset-ID">dataset ID</a> in the next code cell.</p>
<p>If you don’t have a dataset ID, you can:</p>
<ul class="simple">
<li><p>Use the sample dataset ID already in the code cell</p></li>
<li><p>Create a new dataset</p></li>
<li><p>Use a dataset ID from other pre-built sample datasets</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Creating a variable `dataset_id` to hold our dataset ID</span>
<span class="c1"># The default dataset is Shakespeare Quarterly, 1950-present</span>
<span class="n">dataset_id</span> <span class="o">=</span> <span class="s2">&quot;7e41317e-740f-e86a-4729-20dab492e925&quot;</span>
</pre></div>
</div>
</div>
</div>
<p>Next, import the <code class="docutils literal notranslate"><span class="pre">constellate</span></code> client, passing the <code class="docutils literal notranslate"><span class="pre">dataset_id</span></code> as an argument using the <code class="docutils literal notranslate"><span class="pre">get_metadata</span></code> method.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Pull in the sampled (1500 items) dataset CSV using</span>
<span class="c1"># The .get_metadata() method downloads the CSV file for our metadata</span>
<span class="c1"># to the /data folder and returns a string for the file name and location</span>
<span class="c1"># dataset_metadata will be a string containing that file name and location</span>
<span class="n">dataset_metadata</span> <span class="o">=</span> <span class="n">constellate</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">)</span>

<span class="c1"># Download the full dataset (up to a limit of 25,000 documents),</span>
<span class="c1"># request it first in the builder environment. See the Constellate Client</span>
<span class="c1"># documentation at: https://constellate.org/docs/constellate-client</span>
<span class="c1"># Then use the `constellate.download` method show below.</span>
<span class="c1">#dataset_metadata = constellate.download(dataset_id, &#39;metadata&#39;)</span>
</pre></div>
</div>
</div>
</div>
<p>We are ready to import pandas for our analysis and create a dataframe. We will use the <code class="docutils literal notranslate"><span class="pre">read_csv()</span></code> method to create our dataframe from the CSV file.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create our dataframe using Pandas</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">dataset_metadata</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span>
</pre></div>
</div>
</div>
</div>
<p>We can confirm the size of our dataset using the <code class="docutils literal notranslate"><span class="pre">len()</span></code> function on our dataframe.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">original_document_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Total original documents: </span><span class="si">{</span><span class="n">original_document_count</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Now let’s take a look at the data in our dataframe <code class="docutils literal notranslate"><span class="pre">df</span></code>. We will set pandas to show all columns using <code class="docutils literal notranslate"><span class="pre">set_option()</span></code> then get a preview using <code class="docutils literal notranslate"><span class="pre">head()</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set the pandas option to show all columns</span>
<span class="c1"># Setting None gives us all columns</span>
<span class="c1"># To show less columns replace None with an integer</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_columns&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> 

<span class="c1"># Set maximumum number of rows to 50</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_rows&#39;</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>

<span class="c1"># Show the first five rows of our dataframe</span>
<span class="c1"># To show a different number of preview rows</span>
<span class="c1"># Pass an integer into the .head()</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span> 
</pre></div>
</div>
</div>
</div>
<p>Here are descriptions for the metadata types found in each column:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Column Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>id</p></td>
<td><p>a unique item ID (In JSTOR, this is a stable URL)</p></td>
</tr>
<tr class="row-odd"><td><p>title</p></td>
<td><p>the title for the item</p></td>
</tr>
<tr class="row-even"><td><p>isPartOf</p></td>
<td><p>the larger work that holds this title (for example, a journal title)</p></td>
</tr>
<tr class="row-odd"><td><p>publicationYear</p></td>
<td><p>the year of publication</p></td>
</tr>
<tr class="row-even"><td><p>doi</p></td>
<td><p>the digital object identifier for an item</p></td>
</tr>
<tr class="row-odd"><td><p>docType</p></td>
<td><p>the type of document (for example, article or book)</p></td>
</tr>
<tr class="row-even"><td><p>provider</p></td>
<td><p>the source or provider of the dataset</p></td>
</tr>
<tr class="row-odd"><td><p>datePublished</p></td>
<td><p>the publication date in yyyy-mm-dd format</p></td>
</tr>
<tr class="row-even"><td><p>issueNumber</p></td>
<td><p>the issue number for a journal publication</p></td>
</tr>
<tr class="row-odd"><td><p>volumeNumber</p></td>
<td><p>the volume number for a journal publication</p></td>
</tr>
<tr class="row-even"><td><p>url</p></td>
<td><p>a URL for the item and/or the item’s metadata</p></td>
</tr>
<tr class="row-odd"><td><p>creator</p></td>
<td><p>the author or authors of the item</p></td>
</tr>
<tr class="row-even"><td><p>publisher</p></td>
<td><p>the publisher for the item</p></td>
</tr>
<tr class="row-odd"><td><p>language</p></td>
<td><p>the language or languages of the item (eng is the ISO 639 code for English)</p></td>
</tr>
<tr class="row-even"><td><p>pageStart</p></td>
<td><p>the first page number of the print version</p></td>
</tr>
<tr class="row-odd"><td><p>pageEnd</p></td>
<td><p>the last page number of the print version</p></td>
</tr>
<tr class="row-even"><td><p>placeOfPublication</p></td>
<td><p>the city of the publisher</p></td>
</tr>
<tr class="row-odd"><td><p>wordCount</p></td>
<td><p>the number of words in the item</p></td>
</tr>
<tr class="row-even"><td><p>pageCount</p></td>
<td><p>the number of print pages in the item</p></td>
</tr>
<tr class="row-odd"><td><p>outputFormat</p></td>
<td><p>what data is available (<a class="reference external" href="https://machinelearningknowledge.ai/generating-unigram-bigram-trigram-and-ngrams-in-nltk/">unigrams</a>, <a class="reference external" href="https://machinelearningknowledge.ai/generating-unigram-bigram-trigram-and-ngrams-in-nltk/">bigrams</a>, <a class="reference external" href="https://machinelearningknowledge.ai/generating-unigram-bigram-trigram-and-ngrams-in-nltk/">trigrams</a>, and/or full-text)</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<hr class="docutils" />
<section id="filtering-out-columns-using-pandas">
<h2>Filtering out columns using Pandas<a class="headerlink" href="#filtering-out-columns-using-pandas" title="Link to this heading">#</a></h2>
<p>If there are any columns you would like to drop from your analysis, you can drop them with:</p>
<p><code class="docutils literal notranslate"><span class="pre">df</span> <span class="pre">=</span> <span class="pre">df.drop(['column_name1',</span> <span class="pre">'column_name2',</span> <span class="pre">...],</span> <span class="pre">axis=1)</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Drop each of these named columns</span>
<span class="c1"># axis=1 specifies we are dropping columns</span>
<span class="c1"># axis=0 would specify to drop rows</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;outputFormat&#39;</span><span class="p">,</span> <span class="s1">&#39;pageEnd&#39;</span><span class="p">,</span> <span class="s1">&#39;pageStart&#39;</span><span class="p">,</span> <span class="s1">&#39;datePublished&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Show the first five rows of our updated dataframe</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="filtering-out-rows-with-pandas">
<h2>Filtering out rows with Pandas<a class="headerlink" href="#filtering-out-rows-with-pandas" title="Link to this heading">#</a></h2>
<p>Now that we have filtered out unwanted metadata columns, we can begin filtering out any texts that may not match our research interests. Let’s examine the first and last ten rows of the dataframe to see if we can identify texts that we would like to remove. We are looking for patterns in the metadata that could help us remove many texts at once.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Preview the first ten items in the dataframe</span>
<span class="c1"># Can you identify patterns to select rows to remove?</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Preview the last ten items in the dataframe</span>
<span class="c1"># Can you identify patterns to select rows to remove?</span>
<span class="n">df</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># We create a function to report how many documents were removed.</span>

<span class="k">def</span><span class="w"> </span><span class="nf">texts_report</span><span class="p">(</span><span class="n">pre_count</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Prints out a report of:</span>
<span class="sd">    1. How many documents were removed</span>
<span class="sd">    2. The total original number of documents</span>
<span class="sd">    3. The total current number of documents</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">removed_count</span> <span class="o">=</span> <span class="n">pre_count</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">removed_count</span><span class="si">}</span><span class="s1"> texts were removed.&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Total original documents: </span><span class="si">{</span><span class="n">original_document_count</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Total current documents: &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<section id="remove-all-rows-without-data-for-a-particular-column">
<h3>Remove all rows without data for a particular column<a class="headerlink" href="#remove-all-rows-without-data-for-a-particular-column" title="Link to this heading">#</a></h3>
<p>For example, we may wish to remove any texts that do not have authors. (In the case of journals, this may be helpful for removing paratextual sections such as the table of contents, indices, etc.) The column of interest in this case is <code class="docutils literal notranslate"><span class="pre">creator</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Remove all texts without an author</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Removing texts without authors...&#39;</span><span class="p">)</span>
<span class="n">initial_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;creator&#39;</span><span class="p">])</span> <span class="c1">#drop each row that has no value under &#39;creators&#39;</span>

<span class="c1"># Report the number of texts removed</span>
<span class="n">texts_report</span><span class="p">(</span><span class="n">initial_count</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="remove-row-based-on-the-content-of-a-particular-column">
<h3>Remove row based on the content of a particular column<a class="headerlink" href="#remove-row-based-on-the-content-of-a-particular-column" title="Link to this heading">#</a></h3>
<p>We can also remove texts, depending on whether we do (or do not) want a particular value in a column. Here are a few examples.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Remove all items with a particular title</span>
<span class="c1"># Change title to desired column</span>
<span class="c1"># Change `Review Article` to your undesired title</span>
<span class="n">title_to_remove</span> <span class="o">=</span> <span class="s1">&#39;Review Article&#39;</span>

<span class="c1"># Removing texts</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Removing texts with title &quot;</span><span class="si">{</span><span class="n">title_to_remove</span><span class="si">}</span><span class="s1">&quot;...&#39;</span><span class="p">)</span>
<span class="n">initial_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># Create a filter that returns all titles that do not match `title_to_remove`</span>
<span class="c1"># Apply the filter to the DataFrame</span>
<span class="n">title_filter</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">title_to_remove</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">title_filter</span><span class="p">]</span>

<span class="c1"># Report the number of texts removed</span>
<span class="n">texts_report</span><span class="p">(</span><span class="n">initial_count</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Keep only items with a particular language</span>
<span class="c1"># Change language to desired column</span>
<span class="c1"># Change &#39;eng&#39; to your desired language</span>
<span class="n">language</span> <span class="o">=</span> <span class="s1">&#39;eng&#39;</span> <span class="c1"># Change to another language code for other languages</span>

<span class="c1"># Removing texts</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Removing texts not in &quot;</span><span class="si">{</span><span class="n">language</span><span class="si">}</span><span class="s1">&quot; language...&#39;</span><span class="p">)</span>
<span class="n">initial_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># Create a filter that returns all languages matching `language` variable</span>
<span class="n">language_filter</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;language&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">language</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">language_filter</span><span class="p">]</span> <span class="c1"># Apply filter to the DataFrame</span>

<span class="c1"># Report the number of texts removed</span>
<span class="n">texts_report</span><span class="p">(</span><span class="n">initial_count</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Remove all items with less than 1500 words</span>
<span class="c1"># Change `min_word_count to your desired minimum number of words</span>
<span class="n">min_word_count</span> <span class="o">=</span> <span class="mi">1500</span>

<span class="c1"># Removing texts</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Removing texts with fewer than </span><span class="si">{</span><span class="n">min_word_count</span><span class="si">}</span><span class="s1"> words...&#39;</span><span class="p">)</span>
<span class="n">initial_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># Create a filter that </span>
<span class="n">word_count_filter</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;wordCount&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">min_word_count</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">word_count_filter</span><span class="p">]</span>

<span class="c1"># Report the number of texts removed</span>
<span class="n">texts_report</span><span class="p">(</span><span class="n">initial_count</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Take a final look at your dataframe to make sure the current texts fit your research goals. In the next step, we will save the IDs of your pre-processed dataset.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Preview the first 50 rows of your dataset</span>
<span class="c1"># If all the items look good, move to the next step.</span>
<span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="filtering-the-full-json-l-dataset">
<h2>Filtering the Full JSON-L Dataset<a class="headerlink" href="#filtering-the-full-json-l-dataset" title="Link to this heading">#</a></h2>
<p>We created our filtered list of IDs from the metadata CSV. Next, we will download the full dataset (JSON-L file) and then filter out any unwanted documents.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a Python list of IDs we want from the Pandas dataframe</span>
<span class="n">filtered_id_list</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>We can now download the sampled (1500 items) dataset (or the full dataset if it has been requested). See more:</p>
<ul class="simple">
<li><p>Constellate dataset types</p></li>
<li><p>Dataset options</p></li>
<li><p>Constellate client</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Pull in the sampled (1500 items) dataset JSON using</span>
<span class="c1"># The .get_dataset() method downloads the sampled JSON file</span>
<span class="n">dataset_file</span> <span class="o">=</span> <span class="n">constellate</span><span class="o">.</span><span class="n">get_dataset</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">)</span>

<span class="c1"># Download the full dataset (JSON-L file)</span>
<span class="c1"># The full dataset must be requested first</span>
<span class="c1">#dataset_file = constellate.download(dataset_id, &#39;jsonl&#39;)</span>
</pre></div>
</div>
</div>
</div>
<p>Next, we will create an empty JSON-L file to filter our results into. We will also check if we want to overwrite the file, if it already exists.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### Create the filtered JSON-L file ###</span>
<span class="c1"># This may take several minutes to complete</span>


<span class="c1"># Check if a data folder exists. If not, create it.</span>
<span class="n">data_folder</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;../data/&#39;</span><span class="p">)</span>
<span class="n">data_folder</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Define the file output name</span>
<span class="n">file_path</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">()</span> <span class="o">/</span> <span class="s1">&#39;..&#39;</span> <span class="o">/</span> <span class="s1">&#39;data&#39;</span> <span class="o">/</span> <span class="s1">&#39;my_data.jsonl&#39;</span> <span class="c1"># You may change the name of the file here</span>

<span class="c1"># Delete output files if they already exist</span>
<span class="k">if</span> <span class="n">file_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
    <span class="n">overwrite</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Overwrite </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s1">? (yes/no)&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">overwrite</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;yes&#39;</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Overwriting older version of </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">file_path</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
        <span class="n">file_path</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>We can now filter through each document in the original JSON file. All documents that match our filtered ID list will be added to the new JSON file.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Append all documents with ids in `filtered_id_list`</span>
<span class="k">for</span> <span class="n">document</span> <span class="ow">in</span> <span class="n">constellate</span><span class="o">.</span><span class="n">dataset_reader</span><span class="p">(</span><span class="n">dataset_file</span><span class="p">):</span>
    <span class="n">document_id</span> <span class="o">=</span> <span class="n">document</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
    <span class="c1"># Append any documents in the filtered list</span>
    <span class="k">if</span> <span class="n">document_id</span> <span class="ow">in</span> <span class="n">filtered_id_list</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">file_path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="n">outfile</span><span class="p">)</span>
            <span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s1"> created.&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Finally, we compress the dataset file using <code class="docutils literal notranslate"><span class="pre">gzip</span></code>. This will make it easier to transfer the file.</p>
<h3 style="color:red; display:inline">Note! &lt; / &gt; </h3>
<p>The Constellate lab has a storage limit of 10 GB. We recommend keeping datasets locally or on another form of cloud storage. Storing large datasets in the lab may slow down your lab startup time.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Compress the file using gzip</span>
<span class="c1"># This may take several minutes to complete</span>
<span class="c1"># Download this file if you want to keep it.</span>
<span class="c1"># The Constellatae Lab only saves notebooks, not JSON-L datasets</span>
<span class="n">f_in</span> <span class="o">=</span> <span class="n">file_path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span>
<span class="n">f_out</span> <span class="o">=</span> <span class="n">gzip</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s1">.gz&#39;</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span>
<span class="n">f_out</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span><span class="n">f_in</span><span class="p">)</span>
<span class="n">f_out</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">f_in</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Compression complete. </span><span class="se">\n</span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s1">.gz has been created. Please download to your computer to save.&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<hr class="docutils" />
<section id="visualizing-the-pre-processed-data">
<h2>Visualizing the Pre-Processed Data<a class="headerlink" href="#visualizing-the-pre-processed-data" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Group the data by publication year and the aggregated number of ids into a bar chart</span>
<span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;publicationYear&#39;</span><span class="p">])[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Documents by year&#39;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">);</span> 

<span class="c1"># Read more about Pandas dataframe plotting here: </span>
<span class="c1"># https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.plot.html</span>
</pre></div>
</div>
</div>
</div>
<p>And now let’s look at the total page numbers by year.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Group the data by publication year and aggregated sum of the page counts into a bar chart</span>

<span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;publicationYear&#39;</span><span class="p">])[</span><span class="s1">&#39;pageCount&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Pages by decade&#39;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./src/PythonForDataAnalysis/GettingStarted/pandas"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#import-your-dataset">Import your dataset</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#filtering-out-columns-using-pandas">Filtering out columns using Pandas</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#filtering-out-rows-with-pandas">Filtering out rows with Pandas</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#remove-all-rows-without-data-for-a-particular-column">Remove all rows without data for a particular column</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#remove-row-based-on-the-content-of-a-particular-column">Remove row based on the content of a particular column</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#filtering-the-full-json-l-dataset">Filtering the Full JSON-L Dataset</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizing-the-pre-processed-data">Visualizing the Pre-Processed Data</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By University of South Carolina Libraries
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>